<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Force-Directed Graph</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .links line {
            stroke: #999;
            stroke-opacity: 0.6;
        }

        .labels text {
            pointer-events: none;
        }

        #data-file-selector {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
            padding: 5px;
            font-size: 14px;
        }

        #toggle-concept-links {
            position: absolute;
            top: 50px; /* Adjust below the selector */
            left: 10px;
            z-index: 10;
        }

        #toggle-artifact-links {
            position: absolute;
            top: 75px; 
            left: 10px;
            z-index: 10;
        }

        #toggle-option-links {
            position: absolute;
            top: 100px; 
            left: 10px;
            z-index: 10;
        }


    </style>
</head>

<body>
    <select id="data-file-selector"></select>
    <label id="toggle-concept-links">
        <input type="checkbox" id="toggle-concept-links-checkbox">
        Show Co-Changed Technologies
    </label>
    <label id="toggle-artifact-links">
        <input type="checkbox" id="toggle-artifact-links-checkbox">
        Show Co-Changed Files
    </label>
    <label id="toggle-option-links">
        <input type="checkbox" id="toggle-option-links-checkbox">
        Show Co-Changed Options
    </label>
    <script src="src/graph.js"></script>
    <script>
        // Fetch files from the server and populate the dropdown menu
        fetch('/files')
            .then(response => response.json())
            .then(files => {
                const selector = document.getElementById('data-file-selector');
                files.forEach(file => {
                    const option = document.createElement('option');
                    option.value = file;
                    option.textContent = file;
                    selector.appendChild(option);
                });
                // Trigger change event to load the initial graph
                selector.dispatchEvent(new Event('change'));
            })
            .catch(error => console.error('Error fetching files:', error));
    </script>
</body>

</html>